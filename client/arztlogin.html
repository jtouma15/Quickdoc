<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>QuickDoc – Arzt registrieren</title>
    <link rel="stylesheet" href="./styles.css" />
</head>
<body>
<header class="site-hero">
    <div class="container site-hero__inner">
        <a href="/" class="site-hero__brand">
            <img src="/logo.png" alt="QuickDoc Logo" class="site-hero__logo">
            <div class="site-hero__identity">
                <strong class="site-hero__wordmark">QuickDoc</strong>
                <span class="site-hero__descriptor">Praxis-Registrierung</span>
            </div>
        </a>
        <nav class="site-hero__nav" aria-label="Hauptnavigation">
            <a href="/home.html">Start</a>
            <a href="/index.html">Termin finden</a>
            <a href="/impressum.html">Impressum</a>
        </nav>
        <div class="site-hero__actions">
            <span class="site-hero__action user-badge hidden" data-user-firstname hidden></span>
            <a href="/home.html" class="site-hero__action" title="Zur Startseite">Zur Startseite</a>
            <a href="/login.html" class="site-hero__action" title="Patient:innen-Login">Patient:innen-Login</a>
        </div>
        <p class="site-hero__tagline">Registrieren Sie Ihre Praxis und verwalten Sie Termine online.</p>
    </div>
</header>

<main class="container">
    <section class="card" style="max-width: 900px; margin: 2rem auto;">
        <h2 style="margin-bottom: .5rem;">Arzt-Registrierung</h2>
        <p class="muted" style="margin-top: 0;">Felder mit * sind Pflicht.</p>

        <!-- FORM -->
        <form id="docSignup" novalidate>
            <!-- Name -->
            <div class="grid grid--2">
                <div class="form-field">
                    <label for="firstName">Vorname *</label>
                    <input id="firstName" name="firstName" type="text" autocomplete="given-name" required />
                    <small class="error"></small>
                </div>
                <div class="form-field">
                    <label for="lastName">Nachname *</label>
                    <input id="lastName" name="lastName" type="text" autocomplete="family-name" required />
                    <small class="error"></small>
                </div>
            </div>

            <!-- Kontakt -->
            <div class="form-field">
                <label for="email">E-Mail-Adresse *</label>
                <input id="email" name="email" type="email" inputmode="email" autocomplete="email" required />
                <small class="error"></small>
            </div>

            <div class="form-field">
                <label for="phone">Telefonnummer <span class="muted">(optional)</span></label>
                <input id="phone" name="phone" type="tel" placeholder="Beispiel: 0176 1234567" pattern="^[+0-9 ()/-]{6,}$" />
                <small class="error"></small>
            </div>

            <!-- Anschrift -->
            <div class="form-field">
                <label for="address">Anschrift *</label>
                <input id="address" name="address" type="text" placeholder="Straße Hausnr., PLZ Ort" required />
                <small class="error"></small>
            </div>

            <!-- Fachgebiet (nur EIN Pfeil) -->
            <div class="form-field">
                <label for="specialty">Fachgebiet *</label>
                <div class="select select--no-native">
                    <select id="specialty" name="specialty" required>
                        <option value="">Wählen Sie Ihr Fachgebiet</option>
                        <option>Kardiologie</option>
                        <option>Dermatologie</option>
                        <option>Orthopädie</option>
                        <option>Allgemeinmedizin</option>
                        <option>HNO</option>
                        <option>Gynäkologie</option>
                        <option>Neurologie</option>
                        <option>Urologie</option>
                        <option>Zahnmedizin</option>
                    </select>
                </div>
                <small class="error"></small>
            </div>

            <!-- Beschäftigungsverhältnis -->
            <div class="form-field select select--no-native">
                <label for="employment">Beschäftigungsverhältnis *</label>
                <select id="employment" name="employment" required>
                    <option value="" disabled selected hidden>Wählen Sie Ihr Beschäftigungsverhältnis</option>
                    <option value="self">Selbstständig</option>
                    <option value="employed">Angestellt</option>
                </select>
                <small class="error"></small>
            </div>

            <div class="form-field hide" id="employerGroup">
                <label for="employer">Praxis / Klinik <span class="muted">(nur für Angestellte)</span></label>
                <input id="employer" name="employer" type="text" />
                <small class="error"></small>
            </div>

            <!-- Passwort (nur Sternchen, kein Toggle) + Wiederholen -->
            <div class="form-field">
                <label for="password">Passwort *</label>
                <input id="password" name="password" type="password" minlength="8" required />
                <small class="muted">Mindestens 8 Zeichen.</small>
                <small class="error"></small>
            </div>

            <div class="form-field">
                <label for="password2">Passwort wiederholen *</label>
                <input id="password2" name="password2" type="password" minlength="8" required />
                <small class="error"></small>
            </div>

            <!-- AGB Checkbox -->
            <div class="form-field legal">
                <label for="acceptTos" class="legal__text">
                    Ich bestätige hiermit, dass ich die
                    <a href="/img/AGB_QuickDoc_GmbH.pdf" target="_blank" rel="noopener">
                        Allgemeinen Geschäftsbedingungen
                </a>
                gelesen habe und akzeptiere.
                </label>
                <input id="acceptTos" type="checkbox" class="legal__check" required />
                <small class="error"></small>
            </div>

            <!-- Datenschutz Checkbox -->
            <div class="form-field legal">
                <label for="acceptPrivacy" class="legal__text">
                    Ich erkläre hiermit, dass ich die
                    <a href=/img/Datenschutz+.pdf target="_blank" rel="noopener">
                        Datenschutzerklärung
                    </a>
                    gelesen habe und akzeptiere.
                </label>
                <input id="acceptPrivacy" type="checkbox" class="legal__check" required />
                <small class="error"></small>
            </div>

            <!-- CTAs: gleich groß -->
            <div class="form-actions form-actions--equal">
                <button class="btn btn-primary" type="submit">Registrierung anfragen</button>

            </div>

            <p id="formSuccess" class="success hide" role="status">✓ Registriert. Prüfen Sie bitte Ihren Posteingang.</p>
        </form>
    </section>
</main>

<!-- Footer wie gehabt -->
<footer class="site-footer">
    <div class="container site-footer__inner">
        <span class="site-footer__brand">© <span id="year"></span> QuickDoc</span>
        <nav class="site-footer__nav">
            <a href="/impressum.html">Impressum</a>
           <a href=/img/Datenschutz+.pdf target="_blank" rel="noopener">Datenschutz</a>
            <a href="mailto:contact@quickdoc.example">Kontakt</a>
        </nav>
    </div>
</footer>
<script>
    // Footer-Jahr + Datenschutz-Dialog
    (function(){
        const y = document.getElementById('year');
        if (y) y.textContent = new Date().getFullYear();

        const prv = document.getElementById('openPrivacy');
        const dlg = document.getElementById('privacyDialog');
        if (prv && dlg) prv.addEventListener('click', e => { e.preventDefault(); dlg.showModal(); });
    })();

    // UI-Logik Formular
    (function(){
        const f = document.getElementById('docSignup');
        if (!f) return; // falls auf Seiten ohne Formular eingebunden

        const employerGroup = document.getElementById('employerGroup');
        const success = document.getElementById('formSuccess');


        // Employment toggle via Dropdown
        const employmentSelect = f.elements['employment'];
        if (employmentSelect) {
            const toggleEmployer = () => {
                const isEmp = employmentSelect.value === 'employed';
                if (employerGroup) employerGroup.classList.toggle('hide', !isEmp);
                const empInput = f.elements['employer'];
                if (empInput) empInput.toggleAttribute('required', isEmp);
            };
            employmentSelect.addEventListener('change', toggleEmployer);
            toggleEmployer(); // initialer Zustand
        }

        // Helpers für Fehlermeldungen
        function setError(el, msg){
            const field = el.closest('.form-field');
            field?.classList.add('has-error');
            const small = field?.querySelector('.error');
            if (small) small.textContent = msg || 'Bitte prüfen.';
        }
        function clearError(el){
            const field = el.closest('.form-field');
            field?.classList.remove('has-error');
            const small = field?.querySelector('.error');
            if (small) small.textContent = '';
        }

        f.addEventListener('submit', (e) => {
            e.preventDefault();
            if (success) success.classList.add('hide');

            let ok = true;
            const p1 = f.elements['password'];
            const p2 = f.elements['password2'];

            // Grundchecks
            Array.from(f.elements).forEach(el => {
                if (!(el instanceof HTMLInputElement || el instanceof HTMLSelectElement)) return;
                clearError(el);

                if (el.hasAttribute('required') && !el.value.trim()){
                    setError(el, 'Pflichtfeld.');
                    ok = false;
                } else if (el.id === 'email' && el.value && !/^\S+@\S+\.\S+$/.test(el.value)){
                    setError(el, 'Ungültige E-Mail.');
                    ok = false;
                } else if ((el.id === 'password' || el.id === 'password2') && el.value.length < 8){
                    setError(el, 'Mindestens 8 Zeichen.');
                    ok = false;
                } else if (el.id === 'phone' && el.value && !el.checkValidity()){
                    setError(el, 'Ungültige Telefonnummer.');
                    ok = false;
                }
            });

            // Passwort-Gleichheit
            if (p1 && p2 && p1.value && p2.value && p1.value !== p2.value){
                setError(p2, 'Passwörter stimmen nicht überein.');
                ok = false;
            }

            // AGB/Datenschutz (falls vorhanden)
            const tos = document.getElementById('acceptTos');
            const priv = document.getElementById('acceptPrivacy');
            if (tos && !tos.checked){ setError(tos, 'Erforderlich.'); ok = false; }
            if (priv && !priv.checked){ setError(priv, 'Erforderlich.'); ok = false; }

            if (!ok) return;

            // Demo-Erfolg (hier sonst fetch() ans Backend)
            window.location.href = "success.html";
        });
    })();
</script>
</body>
</html>
